CC=gcc
CFLAGS=-c -Wall
LDFLAGS= -pthread
SOURCES_SERVER=mine.c
OBJECTS__SERVER=$(SOURCES_SERVER:.c=.o)
EXECUTABLE_SERVER=mine.e
SOURCES_CLIENT=miner.c
OBJECTS_CLIENT=$(SOURCES_CLIENT:.c=.o)
EXECUTABLE_CLIENT=miner.e

all: $(SOURCES_SERVER) $(EXECUTABLE_SERVER) $(SOURCES_CLIENT) $(EXECUTABLE_CLIENT)
    
$(EXECUTABLE_SERVER): $(OBJECTS__SERVER) 
	$(CC) $(LDFLAGS) $(OBJECTS__SERVER) -o $@

$(EXECUTABLE_CLIENT): $(OBJECTS_CLIENT) 
	$(CC) $(LDFLAGS) $(OBJECTS_CLIENT) -o $@

.c.o:
	$(CC) $(CFLAGS) $< -o $@

clean:
	-rm -f *.o core *.core $(EXECUTABLE_SERVER) $(EXECUTABLE_CLIENT)